From 1be084222b24c9b4b872b76887a08bdde07db657 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Mon, 9 Oct 2017 17:46:39 -0400
Subject: [PATCH] Don't save empty scoreboard teams to scoreboard.dat


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 430b5d0..011cbf5 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -225,4 +225,9 @@ public class PaperConfig {
     private static void enablePlayerCollisions() {
         enablePlayerCollisions = getBoolean("settings.enable-player-collisions", true);
     }
+
+    public static boolean saveEmptyScoreboardTeams = false;
+    private static void saveEmptyScoreboardTeams() {
+        saveEmptyScoreboardTeams = getBoolean("settings.save-empty-scoreboard-teams", false);
+    }
 }
diff --git a/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java b/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java
index e9a68f4..48b78b4 100644
--- a/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java
+++ b/src/main/java/net/minecraft/scoreboard/ScoreboardSaveData.java
@@ -178,6 +178,7 @@ public class ScoreboardSaveData extends WorldSavedData {
         NBTTagList var1 = new NBTTagList();
 
         for (ScorePlayerTeam var4 : this.scoreboard.getTeams()) {
+            if (!com.destroystokyo.paper.PaperConfig.saveEmptyScoreboardTeams && var4.getMembershipCollection().isEmpty()) continue; // Paper
             NBTTagCompound var5 = new NBTTagCompound();
             var5.setString("Name", var4.getName());
             var5.setString("DisplayName", var4.getDisplayName());
-- 
2.18.0

