From 6a4f58cae22fc8e7cc729eef1361741882ceb2b9 Mon Sep 17 00:00:00 2001
From: kashike <kashike@vq.lc>
Date: Sun, 29 Oct 2017 18:09:57 -0400
Subject: [PATCH] Fix NFE when attempting to read EMPTY ItemStack

Thanks @gabizou

diff --git a/src/main/java/net/minecraft/item/ItemStack.java b/src/main/java/net/minecraft/item/ItemStack.java
index 4b9005d..b90cbdf 100644
--- a/src/main/java/net/minecraft/item/ItemStack.java
+++ b/src/main/java/net/minecraft/item/ItemStack.java
@@ -163,7 +163,7 @@ public final class ItemStack {
     }
 
     public void load(NBTTagCompound nbttagcompound) {
-        this.item = Item.getByNameOrId(nbttagcompound.getString("id"));
+        this.item = nbttagcompound.hasKey("id", 8) ? Item.getByNameOrId(nbttagcompound.getString("id")) : Item.getItemFromBlock(Blocks.AIR); // Paper - fix NumberFormatException caused by attempting to read an EMPTY ItemStack
         this.stackSize = nbttagcompound.getByte("Count");
         this.setItemDamage(nbttagcompound.getShort("Damage"));
 
-- 
2.18.0

