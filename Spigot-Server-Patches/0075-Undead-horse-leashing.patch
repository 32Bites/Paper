From 4b7652e24f48c6e82866d686c2fdf61414149852 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sat, 30 Sep 2017 22:54:14 -0400
Subject: [PATCH] Undead horse leashing

Default false to match vanilla, but option to allow undead horse types to be leashed.

diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
index da39dc2..c4c6838 100644
--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
@@ -243,4 +243,9 @@ public class PaperWorldConfig {
     private void nonPlayerEntitiesOnScoreboards() {
         nonPlayerEntitiesOnScoreboards = getBoolean("allow-non-player-entities-on-scoreboards", false);
     }
+
+    public boolean allowLeashingUndeadHorse = false;
+    private void allowLeashingUndeadHorse() {
+        allowLeashingUndeadHorse = getBoolean("allow-leashing-undead-horse", false);
+    }
 }
diff --git a/src/main/java/net/minecraft/entity/passive/AbstractHorse.java b/src/main/java/net/minecraft/entity/passive/AbstractHorse.java
index 0b70aa7..75a3d30 100644
--- a/src/main/java/net/minecraft/entity/passive/AbstractHorse.java
+++ b/src/main/java/net/minecraft/entity/passive/AbstractHorse.java
@@ -166,7 +166,7 @@ public abstract class AbstractHorse extends EntityAnimal implements IInventoryCh
     }
 
     public boolean canBeLeashedTo(EntityPlayer player) {
-        return super.canBeLeashedTo(player) && this.getCreatureAttribute() != EnumCreatureAttribute.UNDEAD;
+        return world.paperConfig.allowLeashingUndeadHorse ? super.canBeLeashedTo(player): super.canBeLeashedTo(player) && this.getCreatureAttribute() != EnumCreatureAttribute.UNDEAD; // Paper
     }
 
     protected void onLeashDistance(float p_142017_1_) {
-- 
2.18.0

