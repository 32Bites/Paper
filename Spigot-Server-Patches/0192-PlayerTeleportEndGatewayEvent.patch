From a2e3e28457f3729da257ab794fb80911c9dab075 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 20 Oct 2017 21:49:54 -0400
Subject: [PATCH] PlayerTeleportEndGatewayEvent

Allows you to access the Gateway being used in a teleport event

diff --git a/src/main/java/net/minecraft/tileentity/TileEntityEndGateway.java b/src/main/java/net/minecraft/tileentity/TileEntityEndGateway.java
index 93dffda..292327d 100644
--- a/src/main/java/net/minecraft/tileentity/TileEntityEndGateway.java
+++ b/src/main/java/net/minecraft/tileentity/TileEntityEndGateway.java
@@ -3,6 +3,8 @@ package net.minecraft.tileentity;
 import java.util.List;
 import java.util.Random;
 import javax.annotation.Nullable;
+
+import com.destroystokyo.paper.util.MCUtil;
 import net.minecraft.block.state.IBlockState;
 import net.minecraft.entity.Entity;
 import net.minecraft.entity.player.EntityPlayerMP;
@@ -141,7 +143,7 @@ public class TileEntityEndGateway extends TileEntityEndPortal implements ITickab
                     location.setPitch(player.getLocation().getPitch());
                     location.setYaw(player.getLocation().getYaw());
                     PlayerTeleportEvent teleEvent =
-                            new PlayerTeleportEvent(player, player.getLocation(), location, TeleportCause.END_GATEWAY);
+                            new com.destroystokyo.paper.event.player.PlayerTeleportEndGatewayEvent(player, player.getLocation(), location, new org.bukkit.craftbukkit.block.CraftEndGateway(MCUtil.toLocation(world, this.getPos()).getBlock())); // Paper
                     Bukkit.getPluginManager().callEvent(teleEvent);
 
                     if (teleEvent.isCancelled()) {
-- 
2.18.0

