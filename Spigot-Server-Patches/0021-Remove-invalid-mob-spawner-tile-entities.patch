From 538dc22585ba5009dd9d039e403b8e45fe45dcd6 Mon Sep 17 00:00:00 2001
From: Byteflux <byte@byteflux.net>
Date: Tue, 1 Mar 2016 15:08:03 -0600
Subject: [PATCH] Remove invalid mob spawner tile entities


diff --git a/src/main/java/net/minecraft/world/chunk/Chunk.java b/src/main/java/net/minecraft/world/chunk/Chunk.java
index a2a368d..33b7382 100644
--- a/src/main/java/net/minecraft/world/chunk/Chunk.java
+++ b/src/main/java/net/minecraft/world/chunk/Chunk.java
@@ -30,6 +30,7 @@ import net.minecraft.init.Blocks;
 import net.minecraft.inventory.IInventory;
 import net.minecraft.server.MinecraftServer;
 import net.minecraft.tileentity.TileEntity;
+import net.minecraft.tileentity.TileEntityMobSpawner;
 import net.minecraft.util.EnumFacing;
 import net.minecraft.util.ReportedException;
 import net.minecraft.util.math.AxisAlignedBB;
@@ -749,6 +750,10 @@ public class Chunk {
 
             tileEntityIn.validate();
             this.tileEntities.put(pos, tileEntityIn);
+            // Paper start - Remove invalid mob spawner tile entities
+        } else if (tileEntityIn instanceof TileEntityMobSpawner && org.bukkit.craftbukkit.util.CraftMagicNumbers.getMaterial(getBlockState(pos).getBlock()) != org.bukkit.Material.MOB_SPAWNER) {
+            this.tileEntities.remove(pos);
+            // Paper end
         } else {
             System.out.println(
                     "Attempted to place a tile entity ("
-- 
2.18.0

