From 5b523aced6df66fe279a5d38b98f6c93a557e4a2 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 20 Oct 2017 21:51:10 -0400
Subject: [PATCH] ShulkerBox Dupe Prevention

This ensures that Shulker Boxes can never drop their contents twice, and
that the inventory is cleared incase it some how also got saved to the world.

diff --git a/src/main/java/net/minecraft/block/BlockShulkerBox.java b/src/main/java/net/minecraft/block/BlockShulkerBox.java
index 016f023..89d5677 100644
--- a/src/main/java/net/minecraft/block/BlockShulkerBox.java
+++ b/src/main/java/net/minecraft/block/BlockShulkerBox.java
@@ -157,6 +157,7 @@ public class BlockShulkerBox extends BlockContainer {
                 }
 
                 spawnAsEntity(worldIn, pos, itemstack);
+                tileentityshulkerbox.clear(); // Paper - This was intended to be called in Vanilla (is checked in the if statement above if has been called) - Fixes dupe issues
             }
 
             worldIn.updateComparatorOutputLevel(pos, state.getBlock());
-- 
2.18.0

